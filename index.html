<!DOCTYPE html>
<html>

<head>
   <title>Shopping Cart</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet" />
   <link href="style.css" rel="stylesheet">
</head>

<body>

   <section>
      <div class="container">
         <div class="cart">
            <div class="col-md-12 col-lg-10 mx-auto">
               <div id="item1" class="cart-item">
                  <div class="row">
                     <div class="col-md-7 center-item">
                        <img src="images/product-1.png" alt="">
                        <h5>iPhone 11 128GB Black</h5>
                     </div>

                     <div class="col-md-5 center-item">
                        <div class="input-group number-spinner">
                           <button id="decrementBtn1" class="btn btn-default"><i class="fas fa-minus"></i></button>
                           <input type="text" id="quantityOfItem1" class="form-control text-center" value="1">
                           <button id="incrementBtn1" class="btn btn-default"><i class="fas fa-plus"></i></button>
                        </div>
                        <h5>$ <span id="price1">1219</span></h5>
                        <img id='removeItem1' src="images/remove.png" alt="" class="remove-item">
                     </div>
                  </div>
               </div>

               <div id="item2" class="cart-item">
                  <div class="row">
                     <div class="col-md-7 center-item mx-auto">
                        <img src="images/product-2.png" alt="">
                        <h5>iPhone 11 Silicone Case - Black</h5>
                     </div>
                     <div class="col-md-5 center-item">
                        <div class="input-group number-spinner">
                           <button id="decrementBtn2" class="btn btn-default"><i id=""
                                 class="fas fa-minus"></i></button>
                           <input type="text" id="quantityOfItem2" class="form-control text-center" value="1">
                           <button id="incrementBtn2" class="btn btn-default"><i class="fas fa-plus"></i></button>

                        </div>
                        <h5>$<span id="price2">59</span></h5>
                        <img id='removeItem2' src="images/remove.png" alt="" class="remove-item">
                     </div>
                  </div>
               </div>

               <div class="cart-item">
                  <div class="row">

                     <div class="col-md-8">
                        <h5>Subtotal: </h5>
                        <h5>Tax: (9% of subtotal)</h5>
                        <h5>Total:</h5>
                     </div>

                     <div class="col-md-4 status">
                        <h5>$ <span id="subtotal">0</span></h5>
                        <h5>$ <span id="tax">0</span></h5>
                        <h5>$ <span id="total">0</span></h5>
                     </div>
                  </div>
               </div>
               <div class="col-md-12 pt-4 pb-4">
                  <button type="button" class="btn btn-success check-out">Check Out</button>
               </div>
            </div>
         </div>
      </div>
   </section>
   <script>
      //Handle Plus and Minus Button Click Event
      const incrementBtn1 = document.getElementById('incrementBtn1');
      incrementBtn1.addEventListener('click', function () {
         quantityHandler("quantityOfItem1", "price1", "increment")
      })
      const incrementBtn2 = document.getElementById('incrementBtn2');
      incrementBtn2.addEventListener('click', function () {
         quantityHandler("quantityOfItem2", "price2", "increment")
      })
      const decrementBtn1 = document.getElementById('decrementBtn1');
      decrementBtn1.addEventListener('click', function () {
         quantityHandler("quantityOfItem1", "price1", "decrement")
      })
      const decrementBtn2 = document.getElementById('decrementBtn2');
      decrementBtn2.addEventListener('click', function () {
         quantityHandler("quantityOfItem2", "price2", "decrement")
      })
      const removeItem1 = document.getElementById('removeItem1');
      removeItem1.addEventListener('click',function(){
         itemRemoveInCart("item1","price1");
      })
      const removeItem2 = document.getElementById('removeItem2');
      removeItem2.addEventListener('click',function(){
         itemRemoveInCart("item2","price2");
      })
      function itemRemoveInCart(itemId,priceId){
         document.getElementById(itemId).style.display = 'none';
         document.getElementById(priceId).innerText = 0;
         updateTotal();
      }
      // total update function
      function updateTotal() {
         let price1 = document.getElementById('price1').innerText;
         let price2 = document.getElementById('price2').innerText;
         let subtotalPrice = parseFloat(price1) + parseFloat(price2);

         //adding 9% tax
         let tax = subtotalPrice * 9 / 100;

         let totalPrice = tax + subtotalPrice;
         totalPrice = parseFloat(totalPrice).toFixed(2);
      
         document.getElementById('subtotal').innerText = subtotalPrice;
         document.getElementById('tax').innerText = tax;
         document.getElementById('total').innerText = totalPrice;
      }
      function quantityHandler(valueId, priceId, type) {
         let itemQuantity = document.getElementById(valueId).value;
         let itemQuantityNumber = parseFloat(itemQuantity);
         let newItemQuantity = type == "increment" ? itemQuantityNumber + 1 : itemQuantityNumber - 1;
         if(newItemQuantity>=1){
            let price = document.getElementById(priceId).innerText;
            let priceNumber = parseFloat(price);
            let originalPrice = priceNumber / itemQuantityNumber;
            let updatedPrice = originalPrice * newItemQuantity;
            // console.log(originalPrice);
            document.getElementById(valueId).value = newItemQuantity;
            document.getElementById(priceId).innerText = updatedPrice;
         }
         updateTotal();
      }
      updateTotal();

      // function addItem(buttonId, valueId, priceId) {
      //    const incrementBtn = document.getElementById(buttonId);
      //    incrementBtn.addEventListener('click', function () {
      //       let count = document.getElementById(valueId).value;
      //       let countNumber = parseFloat(count);
      //       countNumber++;
      //       let price = document.getElementById(priceId).innerText;
      //       let priceNumber = parseFloat(price);
      //       if (priceId == 'price1') {
      //          priceNumber = 1219 * countNumber;
      //       }
      //       else {
      //          priceNumber = 59 * countNumber;
      //       }
      //       document.getElementById(priceId).innerText = priceNumber;
      //       document.getElementById(valueId).value = countNumber;
      //    })
      // }
      // addItem('incrementBtn1', 'quantityOfItem1', 'price1');
      // addItem('incrementBtn2', 'quantityOfItem2', 'price2');

      //Handle Minus Button Click Event
      // function deleteItem(buttonId, valueId, priceId) {
      //    const decrementBtn = document.getElementById(buttonId);
      //    decrementBtn.addEventListener('click', function () {
      //       let count = document.getElementById(valueId).value;
      //       let countNumber = parseFloat(count);
      //       countNumber--;
      //       let price = document.getElementById(priceId).innerText;
      //       let priceNumber = parseFloat(price);
      //       if (priceId == 'price1') {
      //          priceNumber = priceNumber - 1219;
      //       }
      //       else {
      //          priceNumber = priceNumber - 59;
      //       }
      //       document.getElementById(priceId).innerText = priceNumber;
      //       document.getElementById(valueId).value = countNumber;
      //    })
      // }
      // deleteItem('decrementBtn1', "quantityOfItem1", 'price1');
      // deleteItem('decrementBtn2', "quantityOfItem2", 'price2');

   </script>
</body>

</html>